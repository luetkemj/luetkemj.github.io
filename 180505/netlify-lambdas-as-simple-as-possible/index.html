<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.5 'Karla',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Karla',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Karla',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.125rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Karla',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.07323rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Karla',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.04824rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Karla',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Karla',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.97672rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:inherit;font-family:'Karla',sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.96528rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}ul{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:0.85rem;line-height:1.5rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:1rem;line-height:1.5rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}blockquote{margin-left:1.5rem;margin-right:1.5rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.5rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}li > ul{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5rem / 2);}code{font-size:0.85rem;line-height:1.5rem;}kbd{font-size:0.85rem;line-height:1.5rem;}samp{font-size:0.85rem;line-height:1.5rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:calc(0.75rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><meta name="generator" content="Gatsby 4.24.0"/><meta data-react-helmet="true" name="description" content="I could wax poetic about the wonder that is Netlify or I could get to the point. Let&#x27;s get to the point. Netlify does a wonderful job of…"/><meta data-react-helmet="true" property="og:title" content="Netlify Lambdas - As Simple As Possible"/><meta data-react-helmet="true" property="og:description" content="I could wax poetic about the wonder that is Netlify or I could get to the point. Let&#x27;s get to the point. Netlify does a wonderful job of…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mark luetke"/><meta data-react-helmet="true" name="twitter:title" content="Netlify Lambdas - As Simple As Possible"/><meta data-react-helmet="true" name="twitter:description" content="I could wax poetic about the wonder that is Netlify or I could get to the point. Let&#x27;s get to the point. Netlify does a wonderful job of…"/><meta name="theme-color" content="#663399"/><style data-href="/styles.5360e2a49c1d1272dcdf.css" data-identity="gatsby-global-css">.header{padding:24px}.header__masthead{align-items:flex-start;display:flex;justify-content:space-between}.header__masthead a{color:#50e3c2;text-decoration:none;transition:color .15s ease}.header__masthead__logo{margin-left:24px;width:74px}.header__masthead__logo fill{color:#50e3c2}@media screen and (min-width:360px){.header__masthead__logo{width:84px}}@media screen and (min-width:420px){.header__masthead__logo{width:88px}}@media screen and (min-width:460px){.header__masthead__logo{width:auto}}.header__masthead__name{font-size:18px;margin-bottom:8px}.header__masthead__tagline{font-size:16px;letter-spacing:1px;text-transform:uppercase}.footer{align-items:center;border-top:1px solid #e8e8e8;display:flex;flex-direction:column-reverse;margin-top:90px;padding:30px 24px 24px}@media screen and (min-width:650px){.footer{flex-direction:row;justify-content:space-between}}.footer__heart{color:#ff6680;order:1}@media screen and (min-width:650px){.footer__heart{order:0}}.footer__list{list-style:none;margin:0}.footer__list-item{display:inline}.footer__list-item:after{content:" ~ "}.footer__list-item:last-child:after{display:none}*{box-sizing:border-box}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}body{margin:0}a{color:#50e3c2;text-decoration:none}.layout__wrapper{display:flex;flex-direction:column;min-height:100vh}.layout__sprinkles{position:fixed}.layout__header{position:fixed;width:100vw}.layout__content{flex:1 1;margin:183px auto 0;max-width:960px;padding:0 1.0875rem 1.45rem;width:100%}.layout__content>div{background:hsla(0,0%,100%,.85);position:relative;z-index:1}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.list-item{align-items:baseline;display:grid;line-height:1.4;margin-bottom:0;position:relative}.list-item:hover{background-color:#50e3c2}.list-item:hover .list-item__date,.list-item:hover .list-item__link{color:#fff}.list-item:after{background:#828282;bottom:0;content:"";display:block;height:1px;position:absolute;width:100%}.list-item--with-date{grid-template-columns:6ch 1fr}.list-item__date{color:#828282;font-family:Inconsolata;font-size:14px;padding-right:1ch}.list-item__link{color:#111;font-family:Karla;font-size:18px;text-transform:uppercase}@media screen and (min-width:650px){.index{grid-column-gap:24px;display:grid;grid-template-columns:1fr 1fr}}.index__header{border-bottom:1px solid #828282;font-size:16px;font-weight:700;line-height:1.4;margin-bottom:0;text-transform:uppercase}.index__post-list{list-style-type:none;margin:0 0 1.7em}.blog-template{margin:0 auto;max-width:592px}.blog-template__post{text-align:right}.blog-template__date{font-family:Inconsolata;font-size:14px;margin-bottom:8px;text-align:left}.blog-template__title{font-size:18px;margin-bottom:30px;text-align:left;text-transform:uppercase}.blog-template__content{text-align:left}.blog-template img{border:1px solid #e8e8e8;padding:8px}.blog-template img.blog-template__banner-image{border:0;margin-bottom:0;padding:0;text-align:right}.blog-template__nav{display:flex;justify-content:space-between;margin-top:90px}.blog-template__nav__next{text-align:right}.blog-template__nav__previous{text-align:left}.blog-template del{color:#e8e8e8}.blog-template blockquote{border-bottom:1px solid #efefef;border-top:1px solid #efefef;font-style:italic;padding:1em 0}.duthaldumat{color:#e43800}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#efefef;border:1px solid #eee}</style><title data-react-helmet="true">Netlify Lambdas - As Simple As Possible · luetkemj</title><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karla:400,400i,700,700i"/><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata"/><link rel="icon" href="/favicon-32x32.png?v=1831991e0e0c9cc03aa10eca078afa54" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=1831991e0e0c9cc03aa10eca078afa54"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="luetkemj" href="/feed.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__wrapper"><div class="layout__sprinkles"><div style="position:absolute;z-index:-1"><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:65px;color:#50E3C2;transform:rotate(243deg) translate(-12vh, 42vw);opacity:0.15711337226990502">L</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:38px;color:#50E3C2;transform:rotate(161deg) translate(23vh, 9vw);opacity:0.15437573804189558">U</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:34px;color:#50E3C2;transform:rotate(91deg) translate(30vh, -24vw);opacity:0.08930607897995402">E</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:30px;color:#50E3C2;transform:rotate(174deg) translate(-28vh, -10vw);opacity:0.11898849745387283">T</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:24px;color:#50E3C2;transform:rotate(183deg) translate(20vh, -45vw);opacity:0.13180319122877332">K</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:90px;color:#50E3C2;transform:rotate(35deg) translate(36vh, -4vw);opacity:0.17407390600219216">E</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:11px;color:#50E3C2;transform:rotate(319deg) translate(6vh, 50vw);opacity:0.11389380296213661">M</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:87px;color:#50E3C2;transform:rotate(45deg) translate(-14vh, 44vw);opacity:0.09843646603188413">J</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:72px;color:#50E3C2;transform:rotate(106deg) translate(21vh, -2vw);opacity:0.19708883284629386"> </div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:84px;color:#50E3C2;transform:rotate(213deg) translate(-26vh, -45vw);opacity:0.15302331231062505">~</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:69px;color:#50E3C2;transform:rotate(101deg) translate(-37vh, 7vw);opacity:0.1711314215611231"> </div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:18px;color:#50E3C2;transform:rotate(232deg) translate(44vh, 49vw);opacity:0.19867625176226988">C</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:59px;color:#50E3C2;transform:rotate(179deg) translate(31vh, -2vw);opacity:0.12779590796439538">h</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:63px;color:#50E3C2;transform:rotate(285deg) translate(-47vh, 24vw);opacity:0.08570998852060976">a</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:22px;color:#50E3C2;transform:rotate(134deg) translate(-14vh, 2vw);opacity:0.19101013237385595">n</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:78px;color:#50E3C2;transform:rotate(123deg) translate(-2vh, 0vw);opacity:0.0855194016886881">g</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:48px;color:#50E3C2;transform:rotate(308deg) translate(49vh, 10vw);opacity:0.1863964021927469">e</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:85px;color:#50E3C2;transform:rotate(202deg) translate(-34vh, 4vw);opacity:0.050025535077704276"> </div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:92px;color:#50E3C2;transform:rotate(88deg) translate(20vh, -39vw);opacity:0.13431868589447493">~</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:96px;color:#50E3C2;transform:rotate(346deg) translate(37vh, -18vw);opacity:0.13524150029305376"> </div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:63px;color:#50E3C2;transform:rotate(16deg) translate(20vh, 46vw);opacity:0.11230913846279095">I</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:17px;color:#50E3C2;transform:rotate(131deg) translate(-4vh, 34vw);opacity:0.0715134385037421">s</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:36px;color:#50E3C2;transform:rotate(228deg) translate(38vh, 49vw);opacity:0.11591922355283425"> </div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:32px;color:#50E3C2;transform:rotate(27deg) translate(-34vh, 24vw);opacity:0.1568232855560679">~</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:77px;color:#50E3C2;transform:rotate(126deg) translate(42vh, -24vw);opacity:0.12163728551734766"> </div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:92px;color:#50E3C2;transform:rotate(89deg) translate(18vh, 21vw);opacity:0.0879423819076238">G</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:93px;color:#50E3C2;transform:rotate(14deg) translate(-25vh, 12vw);opacity:0.14595452931885117">o</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:33px;color:#50E3C2;transform:rotate(236deg) translate(35vh, 23vw);opacity:0.12109417445167964">o</div><div style="position:absolute;display:inline-block;transition:all 1000ms ease-in-out;font-size:90px;color:#50E3C2;transform:rotate(172deg) translate(1vh, 6vw);opacity:0.19447649139319684">d</div></div></div><div class="layout__header"><div class="header"><div class="header__masthead"><a href="/"><img class="header__masthead__name" src="/static/luetkemj-2e0ab633cd460705d65d5cfe0ffef56d.svg" alt="luetkemj"/><h2 class="header__masthead__tagline">change is good</h2></a><img class="header__masthead__logo" src="/static/logo-stamp-dbafb79b2edb0c1a2f3abf758eed1f95.svg" alt="luetkemj logo"/></div></div></div><div class="layout__content"><div class="blog-template"><div class="blog-template__post"><h2 class="blog-template__date">180505</h2><h1 class="blog-template__title">Netlify Lambdas - As Simple As Possible</h1><div class="blog-template__content"><p>I could wax poetic about the wonder that is <a href="https://www.netlify.com/">Netlify</a> or I could get to the point.</p>
<p>Let's get to the point.</p>
<p>Netlify does a wonderful job of running your build script and deploying your site. So good in fact it is difficult at times to know where Netlify's magic begins and ends. While messing around with Lambda functions on Netlify I found myself struggling to get a successful build going. With so much of the process abstracted away I found it difficult to modify my approach in any meaningful way.</p>
<p>Why was I having problems? Was my build script configuration buggered up? Were the settings on my Netlify account borked? Did I write my .toml file correctly? When exactly does Netlify deploy my functions and where exactly is it looking for them? Does it build them? Do I build them? Do I have to use their <a href="https://www.npmjs.com/package/netlify-lambda">build tool?</a></p>
<p>In the end I found that the best approach to take in order to grok things was a simple one.</p>
<p>As simple as possible.</p>
<p>This is not a complex tutorial. This is also not a tutorial aimed at beginners. It is simply an attempt to strip away all the complexities of modern web development in a concerted effort to focus on the singular problem at hand — understanding how Netlify deploys Lambda functions.</p>
<p>What follows is the most minimal approach to successfully deploy an AWS Lambda on Netlify I could come up with.</p>
<h3>UPDATE 180509</h3>
<p>Project structure and build step has been updated in response to Phil Hawksworth's comment below. While everything worked as initially structured it is bad practice to put your production ready lambdas in your publish folder. Once you start making API calls to protected services that require secrets you are opening  up security holes by publishing your lambdas (and potentially secrets) client side.</p>
<p>Thanks for the catch Phil!</p>
<p><a href="https://github.com/luetkemj/test-netlify-lambdas/tree/simple">Skip to the code on github.</a></p>
<h3>Setting up the project</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># create a directory structure for our project
mkdir -p simple-lambdas/src/functions

# navigate to our new project
cd simple-lambdas

# create a package.json file with npm - just accept all the defaults.
npm init</code></pre></div>
<p>Your project structure should look like this:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">simple-lambdas
  - package.json
  - src
    - functions</code></pre></div>
<h3>A simple function</h3>
<p>Netlify does a <a href="https://www.netlify.com/docs/functions/#javascript-lambda-functions">good job of explaining</a> how a Lambda function should be structured.</p>
<p>Create a file in <code class="language-text">src/functions</code> named <code class="language-text">hello.js</code> and paste Netlify's simple example function into it:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">exports.handler = function(event, context, callback) {
  callback(null, {
    statusCode: 200,
    body: "Hello, World"
  });
}</code></pre></div>
<p>Netlify deploys your Lambda functions <em>AFTER</em> the build step.</p>
<p><em>You must have a build step</em>.</p>
<p>Build steps can get complicated real fast with things like webpack, babel, etc. So we'll sort of fake it by copying our functions dir from <code class="language-text">./src</code> to our project root at <code class="language-text">./functions</code> and making an empty <code class="language-text">./dist</code> dir we can point netlify at for our publish folder.</p>
<p>Add this script to your package.json:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">"build": "rm -rf dist &amp;&amp; rm -rf functions &amp;&amp; cp -r src/functions functions &amp;&amp; mkdir dist"</code></pre></div>
<p>Your package.json should now look like this:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{
  "name": "simple-lambdas",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "build": "rm -rf dist &amp;&amp; rm -rf functions &amp;&amp; cp -r src/functions functions &amp;&amp; mkdir dist"
  },
  "author": "",
  "license": "ISC"
}</code></pre></div>
<p><code class="language-text">npm run build</code> will delete <code class="language-text">./dist</code> and <code class="language-text">./functions</code> if they already exist, make a copy of <code class="language-text">./src/functions</code> to <code class="language-text">./functions</code> and make a new empty dir at <code class="language-text">./dist</code>.</p>
<p>Finally, we need to tell Netlify how our project is structured. This can be done from their web interface but in this tutorial we will create a special settings file that will override those settings.</p>
<p>Create a file called <code class="language-text">netlify.toml</code> in the root of your project with the following contents:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">[build]
  command = "npm run build" # your build command
  publish = "./dist" # where your production ready code lives AFTER your build command has run
  functions = "./functions" # where your production ready lambda functions live AFTER your build command has run</code></pre></div>
<p>Every root file in <code class="language-text">./functions</code> will become an endpoint with the following structure:</p>
<p><code class="language-text">{your-site-root}/.netlify/functions/{filename}</code></p>
<p>to see it in action deploy the project to Netlify and navigate to:</p>
<p><code class="language-text">{your-site-root}/.netlify/functions/hello</code></p>
<p>In the end Netlify does surprising little with your project. It runs the build command you tell it to, publishes the production code from the directory you tell it to, and packages and deploys functions from the directory you tell it to. What happens in your build step is entirely up to <strong>you</strong>. Where you put your production ready code and Lambda functions is entirely up to <strong>you</strong>.</p>
<p>With this simple understanding, complexity may flourish.</p></div></div></div><div class="blog-template__nav"><div class="blog-template__nav__previous"><div>☜ <br/><a href="/190101/new-look-same-great-taste">New Look, Same Great Taste!</a></div></div><div class="blog-template__nav__next"><div>☞ <br/><a href="/170902/experiencing-flow">Experiencing Flow</a></div></div></div></div><div class="footer"><ul class="footer__list"><li class="footer__list-item"><a href="https://github.com/luetkemj">github</a></li><li class="footer__list-item"><a href="https://twitter.com/markluetke">twitter</a></li><li class="footer__list-item"><a href="https://www.instagram.com/luetkemj/">instagram</a></li></ul><div title="made with ♥ in ATX" class="footer__heart">♥</div><ul class="footer__list"><li class="footer__list-item"><a href="/about">about</a></li><li class="footer__list-item"><a href="/contact">contact</a></li><li class="footer__list-item"><a href="/feed.xml">rss</a></li></ul></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-19986266-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-19986266-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/180505/netlify-lambdas-as-simple-as-possible";window.___webpackCompilationHash="90a870a24ff8386920a2";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-95ba47a7edde421f65c6.js"],"app":["/app-34c5c4d22dfeab4b6a2e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-9a074db15b262e358565.js"],"component---src-pages-404-js":["/component---src-pages-404-js-40219fe53bb75ef5fc16.js"],"component---src-pages-about-js":["/component---src-pages-about-js-cfc96d1a5830d1f299df.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-6d8e265dfcef9c29068e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-63aeec480e1b0327d575.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-5cb9750832c1f87e148d.js"]};/*]]>*/</script><script src="/polyfill-95ba47a7edde421f65c6.js" nomodule=""></script><script src="/app-34c5c4d22dfeab4b6a2e.js" async=""></script><script src="/framework-c98d89b212eefb2990f9.js" async=""></script><script src="/webpack-runtime-85853f781ec73c7ecc14.js" async=""></script></body></html>